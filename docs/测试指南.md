# 测试指南

## 功能测试清单

### 1. 服务器启动测试

```bash
npm start
```

**预期结果**:
- 显示 "🎮 3D五子棋服务器已启动！"
- 显示本地访问地址
- 显示局域网访问地址
- 无错误信息

### 2. 大厅功能测试

#### 2.1 创建房间
1. 打开浏览器访问 `http://localhost:3000`
2. 输入昵称（可选）
3. 留空房间号或输入自定义房间号
4. 点击"创建房间"

**预期结果**:
- 进入游戏界面
- 显示"等待对手加入"提示
- 显示房间号

#### 2.2 加入房间
1. 在另一个浏览器标签页打开 `http://localhost:3000`
2. 输入昵称
3. 输入房间号
4. 点击"加入房间"

**预期结果**:
- 两个客户端都进入游戏界面
- 显示双方玩家名称
- 黑棋玩家显示"✨ 你的回合"
- 白棋玩家显示"⏳ 对手回合"

#### 2.3 错误处理
- 加入不存在的房间 → 显示"房间不存在"
- 加入已满的房间 → 显示"房间已满"
- 创建重复房间号 → 显示"房间已存在"

### 3. 游戏功能测试

#### 3.1 正常落子
1. 黑棋玩家点击棋盘任意交叉点
2. 观察棋子落下动画
3. 回合切换到白棋

**预期结果**:
- 棋子从上方落下并弹跳
- 最后落子位置有高亮圆环
- 手数显示更新
- 回合指示器切换

#### 3.2 胜负判断
1. 连续落子形成五子连珠

**预期结果**:
- 显示游戏结束界面
- 胜者显示"🎉 胜利"
- 败者显示"💫 败北"
- 可点击"再来一局"

#### 3.3 平局判断
1. 棋盘下满（225 手）无人获胜

**预期结果**:
- 显示"平局"界面

#### 3.4 非法操作
- 非当前回合落子 → 无反应
- 已有棋子的位置落子 → 无反应
- 棋盘外点击 → 无反应

### 4. 3D 交互测试

#### 4.1 视角控制（PC）
- 右键拖拽 → 旋转视角
- 滚轮 → 缩放视角
- 点击"重置视角" → 恢复默认视角

#### 4.2 触摸控制（移动端）
- 单指滑动 → 旋转视角
- 双指缩放 → 缩放视角
- 单击 → 落子

#### 4.3 悬停效果
- 鼠标移动到棋盘 → 显示青色圆环
- 移出棋盘 → 圆环消失
- 非己方回合 → 无悬停效果

### 5. 聊天功能测试

1. 在聊天输入框输入消息
2. 点击"发送"或按回车

**预期结果**:
- 消息显示在聊天区域
- 对方客户端同步收到消息
- 黑棋玩家名称显示为灰色
- 白棋玩家名称显示为白色

### 6. 重新开始测试

1. 游戏进行中或结束后点击"重新开始"

**预期结果**:
- 棋盘清空
- 手数归零
- 回合重置为黑棋
- 聊天显示"新一局开始！"

### 7. 断线测试

1. 关闭其中一个客户端标签页

**预期结果**:
- 另一客户端显示"对手已离开游戏"
- 游戏状态变为不可操作

### 8. 响应式测试

#### 8.1 桌面端（1920x1080）
- 界面布局正常
- 所有元素可见
- 操作流畅

#### 8.2 平板端（768x1024）
- 界面自动缩放
- 触摸操作正常

#### 8.3 手机端（375x667）
- 面板尺寸缩小
- 聊天区域高度调整
- 触摸操作正常

## 性能测试

### 1. 帧率测试
打开浏览器开发者工具 → Performance → 录制

**预期结果**:
- 空闲时 60 FPS
- 落子动画时 ≥ 30 FPS
- 无明显卡顿

### 2. 内存测试
开发者工具 → Memory → 录制堆快照

**预期结果**:
- 初始内存 < 50MB
- 游戏过程中无明显增长
- 重新开始后内存释放

### 3. 网络延迟测试
开发者工具 → Network → 限速（Fast 3G）

**预期结果**:
- 落子延迟 < 500ms
- 聊天消息延迟 < 300ms
- 无消息丢失

## 兼容性测试

### 浏览器兼容性
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ Safari 14+
- ❌ IE 11（不支持）

### 操作系统
- ✅ Windows 10/11
- ✅ macOS 11+
- ✅ Linux (Ubuntu 20.04+)
- ✅ iOS 14+
- ✅ Android 10+

## 压力测试

### 多房间测试
1. 创建 10 个房间
2. 每个房间 2 个玩家同时对局

**预期结果**:
- 服务器稳定运行
- 各房间互不干扰
- CPU 使用率 < 50%
- 内存使用 < 500MB

### 长时间运行测试
1. 启动服务器
2. 持续运行 24 小时
3. 期间进行多次对局

**预期结果**:
- 无内存泄漏
- 无崩溃
- 响应速度稳定

## 已知问题

### 当前限制
1. 房间数据存储在内存，服务器重启会丢失
2. 无用户认证，任何人都可加入房间
3. 无观战功能
4. 无对局回放功能
5. 无战绩统计

### 待优化项
1. 添加房间密码保护
2. 实现对局录像
3. 添加悔棋功能
4. 支持 AI 对战
5. 接入数据库持久化

## 测试报告模板

```markdown
## 测试报告

**测试日期**: YYYY-MM-DD
**测试人员**: 姓名
**测试环境**: 
- 操作系统: Windows 11
- 浏览器: Chrome 120
- Node.js: v18.17.0

### 测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 服务器启动 | ✅ | 正常 |
| 创建房间 | ✅ | 正常 |
| 加入房间 | ✅ | 正常 |
| 落子功能 | ✅ | 正常 |
| 胜负判断 | ✅ | 正常 |
| 3D 交互 | ✅ | 正常 |
| 聊天功能 | ✅ | 正常 |
| 重新开始 | ✅ | 正常 |
| 断线处理 | ✅ | 正常 |
| 响应式布局 | ✅ | 正常 |

### 发现的问题

1. 无

### 建议

1. 建议添加房间列表功能
2. 建议添加音效
```

## 自动化测试（未来计划）

### 单元测试
```javascript
// 示例：测试 GameLogic.checkWin
describe('GameLogic', () => {
  it('应该检测到横向五子连珠', () => {
    const board = createEmptyBoard();
    // 放置五个黑子
    for (let i = 0; i < 5; i++) {
      board[7][i] = 1;
    }
    expect(GameLogic.checkWin(board, 7, 4, 1)).toBe(true);
  });
});
```

### 集成测试
使用 Socket.IO Client 模拟多个客户端进行自动化测试。

### E2E 测试
使用 Puppeteer 或 Playwright 进行端到端测试。
